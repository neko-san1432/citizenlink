<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics - CitizenLink</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/additional-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-shield-alt"></i>
                    <span>CitizenLink</span>
                </div>
                <button class="sidebar-close" id="sidebar-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="dashboard.html">
                            <i class="fas fa-home"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="submit-complaint.html">
                            <i class="fas fa-file-alt"></i>
                            <span>Submit Complaint</span>
                        </a>
                    </li>
                    <li>
                        <a href="my-complaints.html">
                            <i class="fas fa-comment-alt"></i>
                            <span>My Complaints</span>
                        </a>
                    </li>
                    <li>
                        <a href="analytics.html" class="active">
                            <i class="fas fa-chart-line"></i>
                            <span>Analytics</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <div class="user-menu">
                    <button class="user-menu-btn">
                        <i class="fas fa-user"></i>
                        <span id="user-name">John Citizen</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="user-dropdown">
                        <a href="profile.html">Profile Settings</a>
                        <a href="#" id="logout-btn" class="text-danger">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Log out</span>
                        </a>
                    </div>
                </div>
            </div>
        </aside>

        <div class="main-content">
            <header class="dashboard-header">
                <button class="sidebar-toggle" id="sidebar-toggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="header-right">
                    <span class="welcome-text">Welcome, <span id="header-user-name">John Citizen</span></span>
                </div>
            </header>

            <main class="dashboard-main">
                <div class="page-header">
                    <div>
                        <h2>Analytics</h2>
                        <p class="text-muted">Detailed insights about your complaints and community issues.</p>
                    </div>
                    <div class="date-range-picker">
                        <label for="date-range">Date Range:</label>
                        <select id="date-range" class="filter-select">
                            <option value="month" selected>Last 30 Days</option>
                            <option value="quarter">Last 90 Days</option>
                            <option value="year">Last 365 Days</option>
                            <option value="all">All Time</option>
                        </select>
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="card-header">
                            <h3>Your Complaint History</h3>
                            <p class="text-muted">Complaints submitted over time</p>
                        </div>
                        <div class="card-content">
                            <canvas id="history-chart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="card-header">
                            <h3>Resolution Time</h3>
                            <p class="text-muted">Average days to resolve by complaint type</p>
                        </div>
                        <div class="card-content">
                            <canvas id="resolution-time-chart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="card-header">
                            <h3>Complaint Categories</h3>
                            <p class="text-muted">Distribution by type</p>
                        </div>
                        <div class="card-content">
                            <canvas id="categories-chart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="card-header">
                            <h3>Status Breakdown</h3>
                            <p class="text-muted">Current status of all your complaints</p>
                        </div>
                        <div class="card-content">
                            <canvas id="status-chart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>Community Comparison</h3>
                        <p class="text-muted">How your experience compares to the community average</p>
                    </div>
                    <div class="card-content">
                        <div class="comparison-grid">
                            <div class="comparison-card">
                                <div class="comparison-header">
                                    <h4>Resolution Time</h4>
                                </div>
                                <div class="comparison-content">
                                    <div class="comparison-values">
                                        <div class="comparison-value">
                                            <span class="value-label">Your Average</span>
                                            <span class="value-number">3.2 days</span>
                                        </div>
                                        <div class="comparison-value">
                                            <span class="value-label">Community Average</span>
                                            <span class="value-number">4.5 days</span>
                                        </div>
                                    </div>
                                    <div class="comparison-bar-container">
                                        <div class="comparison-marker" style="left: 71%"></div>
                                        <div class="comparison-bar" style="width: 71%"></div>
                                    </div>
                                    <div class="comparison-result positive">
                                        <i class="fas fa-check-circle"></i>
                                        <span>29% faster than average</span>
                                    </div>
                                </div>
                            </div>
                            <div class="comparison-card">
                                <div class="comparison-header">
                                    <h4>Resolution Rate</h4>
                                </div>
                                <div class="comparison-content">
                                    <div class="comparison-values">
                                        <div class="comparison-value">
                                            <span class="value-label">Your Rate</span>
                                            <span class="value-number">75%</span>
                                        </div>
                                        <div class="comparison-value">
                                            <span class="value-label">Community Rate</span>
                                            <span class="value-number">82%</span>
                                        </div>
                                    </div>
                                    <div class="comparison-bar-container">
                                        <div class="comparison-marker" style="left: 91%"></div>
                                        <div class="comparison-bar" style="width: 91%"></div>
                                    </div>
                                    <div class="comparison-result negative">
                                        <i class="fas fa-exclamation-circle"></i>
                                        <span>7% lower than average</span>
                                    </div>
                                </div>
                            </div>
                            <div class="comparison-card">
                                <div class="comparison-header">
                                    <h4>Response Time</h4>
                                </div>
                                <div class="comparison-content">
                                    <div class="comparison-values">
                                        <div class="comparison-value">
                                            <span class="value-label">Your Average</span>
                                            <span class="value-number">12 hours</span>
                                        </div>
                                        <div class="comparison-value">
                                            <span class="value-label">Community Average</span>
                                            <span class="value-number">18 hours</span>
                                        </div>
                                    </div>
                                    <div class="comparison-bar-container">
                                        <div class="comparison-marker" style="left: 67%"></div>
                                        <div class="comparison-bar" style="width: 67%"></div>
                                    </div>
                                    <div class="comparison-result positive">
                                        <i class="fas fa-check-circle"></i>
                                        <span>33% faster than average</span>
                                    </div>
                                </div>
                            </div>
                            <div class="comparison-card">
                                <div class="comparison-header">
                                    <h4>Complaint Volume</h4>
                                </div>
                                <div class="comparison-content">
                                    <div class="comparison-values">
                                        <div class="comparison-value">
                                            <span class="value-label">Your Count</span>
                                            <span class="value-number">7</span>
                                        </div>
                                        <div class="comparison-value">
                                            <span class="value-label">Community Average</span>
                                            <span class="value-number">5.2</span>
                                        </div>
                                    </div>
                                    <div class="comparison-bar-container">
                                        <div class="comparison-marker" style="left: 74%"></div>
                                        <div class="comparison-bar" style="width: 74%"></div>
                                    </div>
                                    <div class="comparison-result neutral">
                                        <i class="fas fa-info-circle"></i>
                                        <span>35% more than average</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>Neighborhood Insights</h3>
                        <p class="text-muted">Common issues in your area</p>
                    </div>
                    <div class="card-content">
                        <div class="neighborhood-grid">
                            <div class="neighborhood-card">
                                <div class="neighborhood-icon">
                                    <i class="fas fa-road"></i>
                                </div>
                                <div class="neighborhood-content">
                                    <h4>Road Maintenance</h4>
                                    <p>Most common issue in your area (32% of complaints)</p>
                                    <div class="neighborhood-stats">
                                        <div class="stat">
                                            <span class="stat-label">Avg. Resolution</span>
                                            <span class="stat-value">5.2 days</span>
                                        </div>
                                        <div class="stat">
                                            <span class="stat-label">Trend</span>
                                            <span class="stat-value">
                                                <i class="fas fa-arrow-down text-success"></i> 12%
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="neighborhood-card">
                                <div class="neighborhood-icon">
                                    <i class="fas fa-trash"></i>
                                </div>
                                <div class="neighborhood-content">
                                    <h4>Waste Collection</h4>
                                    <p>Second most common issue (24% of complaints)</p>
                                    <div class="neighborhood-stats">
                                        <div class="stat">
                                            <span class="stat-label">Avg. Resolution</span>
                                            <span class="stat-value">2.8 days</span>
                                        </div>
                                        <div class="stat">
                                            <span class="stat-label">Trend</span>
                                            <span class="stat-value">
                                                <i class="fas fa-arrow-up text-danger"></i> 8%
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="neighborhood-card">
                                <div class="neighborhood-icon">
                                    <i class="fas fa-lightbulb"></i>
                                </div>
                                <div class="neighborhood-content">
                                    <h4>Street Lighting</h4>
                                    <p>Third most common issue (18% of complaints)</p>
                                    <div class="neighborhood-stats">
                                        <div class="stat">
                                            <span class="stat-label">Avg. Resolution</span>
                                            <span class="stat-value">4.5 days</span>
                                        </div>
                                        <div class="stat">
                                            <span class="stat-label">Trend</span>
                                            <span class="stat-value">
                                                <i class="fas fa-equals text-neutral"></i> Stable
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="neighborhood-card">
                                <div class="neighborhood-icon">
                                    <i class="fas fa-volume-up"></i>
                                </div>
                                <div class="neighborhood-content">
                                    <h4>Noise Complaints</h4>
                                    <p>Fourth most common issue (12% of complaints)</p>
                                    <div class="neighborhood-stats">
                                        <div class="stat">
                                            <span class="stat-label">Avg. Resolution</span>
                                            <span class="stat-value">1.5 days</span>
                                        </div>
                                        <div class="stat">
                                            <span class="stat-label">Trend</span>
                                            <span class="stat-value">
                                                <i class="fas fa-arrow-down text-success"></i> 15%
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../js/data.js"></script>
    <script src="../js/auth-check.js"></script>
    <script src="../js/citizen-analytics.js"></script>
</body>
</html>